# raporekrani.kv (testscreen.kv stiline güncellendi)

#:import get_color_from_hex kivy.utils.get_color_from_hex

#--- testscreen.kv'den gelen ve artık tüm ekranlarda kullanılabilecek
#    tutarlı buton stilimiz ---
<WobblyButton@Button>:
    font_name: 'algomind/assets/GochiHand-Regular.ttf'
    font_size: '22sp'
    color: (1, 1, 1, 1)
    background_normal: ''
    background_down: ''
    # Butonun durumuna (basılı/normal) göre arkaplan rengini değiştiriyoruz
    background_color: get_color_from_hex('#4990e2') if self.state == 'normal' else get_color_from_hex('#407dbf')

    canvas.after:
        Color:
            rgba: (1, 1, 1, 1)
        Line:
            # Butonun etrafına yuvarlak köşeli beyaz bir çizgi ekliyoruz
            rounded_rectangle: (self.x, self.y, self.width, self.height, dp(15))
            width: 1.5

<RaporEkrani>:
    report_text_content: report_text_content
    BoxLayout:
        orientation: 'vertical'
        padding: dp(20)
        spacing: dp(15)
        canvas.before:
            Color:
                # Arka plan rengini test ekranıyla aynı yapıyoruz
                rgba: get_color_from_hex('#4990e2')
            Rectangle:
                pos: self.pos
                size: self.size

        #--- Üst Bar (Geri ve Profil Butonları) ---
        BoxLayout:
            size_hint_y: None
            height: dp(50)
            spacing: dp(10)

            WobblyButton:
                text: '<-'
                size_hint_x: None
                width: dp(60)
                font_size: '24sp' # İkon gibi olduğu için biraz büyük kalabilir
                on_press: root.go_back_to_selection()

            BoxLayout: # Butonlar arasında boşluk oluşturur

            WobblyButton:
                text: 'Profil'
                size_hint_x: None
                width: dp(120)
                font_size: '18sp' # Profil yazısı daha küçük ve zarif
                on_press: root.on_profile_button_press()

        #--- Ekran Başlığı ---
        Label:
            text: 'Rapor'
            font_name: 'algomind/assets/GochiHand-Regular.ttf'
            font_size: '30sp' # Başlık olduğu için daha büyük
            color: (1, 1, 1, 1)
            size_hint_y: None
            height: self.texture_size[1] + dp(10) # İçeriğe göre yükseklik

        #--- Rapor İçerik Alanı ---
        BoxLayout:
            padding: dp(15)
            canvas.before:
                Color:
                    # İçerik alanı arka planı beyaz
                    rgba: (1, 1, 1, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [dp(15)]
            # Stil bütünlüğü için içerik alanına da bir çerçeve ekleyelim
            canvas.after:
                Color:
                    # Çerçeve rengi, ana arka planla aynı
                    rgba: get_color_from_hex('#4990e2')
                Line:
                    rounded_rectangle: (self.x, self.y, self.width, self.height, dp(15))
                    width: 1.5

            # Uzun rapor metinlerinin ekrana sığması için ScrollView ekledik
            ScrollView:
                bar_width: dp(10)
                bar_color: get_color_from_hex('#4990e2')
                Label:
                    id: report_text_content
                    text: "" # Bu kısım Python tarafından doldurulacak
                    color: (0, 0, 0, 1) # Okunabilirlik için siyah metin
                    font_size: '16sp'
                    halign: 'left'
                    valign: 'top'
                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None