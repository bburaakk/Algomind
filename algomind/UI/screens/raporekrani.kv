#:kivy 2.1.0

# Kural adını Python sınıfı adıyla eşleştiriyoruz: RaporEkrani
<RaporEkrani>:
    canvas.before:
        Color:
            # Arka plan rengini isteğiniz üzerine güncelledik.
            rgba: (74/255, 144/255, 226/255, 1)
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        padding: '20dp'
        spacing: '20dp'

        # Grafikler Bölümü
        BoxLayout:
            orientation: 'horizontal'
            spacing: '20dp'
            size_hint_y: 0.45

            # Sol Grafik Kartı
            BoxLayout:
                orientation: 'vertical'
                padding: '10dp'
                canvas.before:
                    Color:
                        rgba: (1, 1, 1, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [15,]
                Label:
                    text: 'Zamana Göre Gelişim'
                    font_size: '18sp'
                    color: (0.2, 0.2, 0.2, 1)
                    size_hint_y: None
                    height: '30dp'
                    halign: 'left'
                    text_size: self.width, None
                Image:
                    source: 'algomind/assets/grafik.png'
                    allow_stretch: True
                    keep_ratio: False

            # Sağ Grafik Kartı
            BoxLayout:
                orientation: 'vertical'
                padding: '10dp'
                canvas.before:
                    Color:
                        rgba: (1, 1, 1, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [15,]
                Label:
                    text: 'Konu Performansı'
                    font_size: '18sp'
                    color: (0.2, 0.2, 0.2, 1)
                    size_hint_y: None
                    height: '30dp'
                    halign: 'left'
                    text_size: self.width, None
                Image:
                    source: 'algomind/assets/grafik.png'
                    allow_stretch: True
                    keep_ratio: False

        # Detaylı Analiz Bölümü
        ScrollView:
            size_hint_y: 0.45
            canvas.before:
                Color:
                    rgba: (1, 1, 1, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15,]
            GridLayout:
                cols: 1
                size_hint_y: None
                height: self.minimum_height
                padding: '15dp'
                spacing: '10dp'
                Label:
                    text: 'Detaylı Analiz'
                    font_size: '20sp'
                    bold: True
                    color: (0.1, 0.1, 0.1, 1)
                    size_hint_y: None
                    height: '40dp'
                Label:
                    # ÖNEMLİ: Python'daki ObjectProperty'ye bağlanmak için id ekledik.
                    id: report_text_content
                    text: "Rapor içeriği yükleniyor..." # Bu metin Python tarafından güncellenecek
                    font_size: '15sp'
                    color: (0.4, 0.4, 0.4, 1)
                    size_hint_y: None
                    height: self.texture_size[1]
                    markup: True
                    text_size: self.width, None
                    line_height: 1.5

        # Alt Navigasyon Butonları
        BoxLayout:
            size_hint_y: None
            height: '50dp'
            orientation: 'horizontal'
            spacing: '10dp'

            Button:
                text: "Geri"
                font_name: 'algomind/assets/GochiHand-Regular.ttf'
                font_size: '16sp'
                size_hint: None, None
                size: dp(90), dp(45)
                background_normal: ''
                background_color: (0, 0, 0, 0)
                on_press: root.go_back_to_selection()

                #--- DEĞİŞİKLİK: Stil TestButton ile aynı yapıldı ---
                canvas.before:
                    Color:
                        # Yarı saydam beyaz arka plan
                        rgba: 1, 1, 1, 0.1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(15)]
                    # Kenarlık rengi mavi tona çevrildi
                    Color:
                        rgba: (52/255, 152/255, 219/255, 1)
                    Line:
                        width: 1.5
                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(15))

            Widget: # Butonları ayırmak için boşluk

            Button:
                text: "Profil"
                font_name: 'algomind/assets/GochiHand-Regular.ttf'
                font_size: '16sp'
                size_hint: None, None
                size: dp(90), dp(45)
                background_normal: ''
                background_color: (0, 0, 0, 0)

                #--- DEĞİŞİKLİK: Stil TestButton ile aynı yapıldı ---
                canvas.before:
                    Color:
                        # Yarı saydam beyaz arka plan
                        rgba: 1, 1, 1, 0.1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(15)]
                    # Kenarlık rengi mavi tona çevrildi
                    Color:
                        rgba: (52/255, 152/255, 219/255, 1)
                    Line:
                        width: 1.5
                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(15))