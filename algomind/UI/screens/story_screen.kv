<StoryScreen>:
    md_bg_color: app.theme_cls.bg_normal
    MDBoxLayout:
        orientation: 'vertical'
        MDTopAppBar:
            title: "Masal Oluşturucu"
            elevation: 4
            left_action_items: [["menu", lambda x: app.root.ids.nav_drawer.set_state("open")]]
        ScrollView:
            MDBoxLayout:
                orientation: 'vertical'
                padding: "24dp"
                spacing: "24dp"
                adaptive_height: True
                MDTextField:
                    id: topic_input
                    hint_text: "Bir konu girin (örn: Orman)"
                    helper_text: "Masalınız bu konu hakkında olacak."
                    helper_text_mode: "on_focus"
                    icon_right: "lightbulb-on-outline"
                    icon_right_color: app.theme_cls.primary_color
                    pos_hint: {'center_x': 0.5}
                    size_hint_x: 0.9
                MDLabel:
                    id: story_label
                    text: '[i]Bir konu girin ve "Masal Oluştur" düğmesine dokunun...[/i]'
                    markup: True
                    adaptive_height: True
                    color: app.theme_cls.text_color
                    text_size: self.width, None
                    halign: "center"
                    valign: "top"
                MDSpinner:
                    id: spinner
                    size_hint: None, None
                    size: dp(46), dp(46)
                    pos_hint: {'center_x': 0.5}
                    active: False
                # Butonları içeren ana layout
                MDBoxLayout:
                    # Layout'un genişliğini içeriği kadar yap
                    size_hint_x: None
                    width: self.minimum_width
                    # Layout'u yatayda ortala
                    pos_hint: {'center_x': 0.5}
                    adaptive_height: True
                    spacing: "24dp"  # Butonlar arası boşluğu artır
                    padding: [0, "16dp", 0, 0]
                    MDFillRoundFlatButton:
                        id: gen_btn
                        text: 'Masal Oluştur'
                        icon: "book-plus"
                        on_press: root.generate_story(self)
                        # Butonu daha uzun ve yazıyı daha büyük yap
                        size_hint_y: None
                        height: dp(50)
                        font_size: "20sp"
                    MDFillRoundFlatButton:
                        id: play_btn
                        text: 'Tekrar Dinle'
                        icon: "replay"
                        disabled: True
                        on_press: root.replay_audio(self)
                        # Butonu daha uzun ve yazıyı daha büyük yap
                        size_hint_y: None
                        height: dp(50)
                        font_size: "20sp"