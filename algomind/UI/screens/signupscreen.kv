#:kivy 2.1.0
#:import dp kivy.metrics.dp
#:import ButtonBehavior kivy.uix.behaviors.button.ButtonBehavior
#:import MDCheckbox kivymd.uix.selectioncontrol.MDCheckbox
#:import get_color_from_hex kivy.utils.get_color_from_hex

<SignUpScreen>:
    FloatLayout:
        canvas.before:
            Color:
                rgba: 3/255, 115/255, 252/255, 1
            RoundedRectangle:
                size: self.width, self.height * 0.6
                pos: 0, self.height * 0.4
                radius: [0, 0, dp(40), dp(40)]
            Color:
                rgba: 1, 1, 1, 0.1
            Ellipse:
                size: dp(50), dp(50)
                pos: self.width * 0.7, self.height * 0.85
            Ellipse:
                size: dp(80), dp(80)
                pos: self.width * 0.2, self.height * 0.7
            Ellipse:
                size: dp(30), dp(30)
                pos: self.width * 0.85, self.height * 0.65


        Label:
            text: 'Hesap Oluştur'
            font_size: '38sp'
            bold: True
            pos_hint: {'top': 0.9, 'x': 0.1}
            size_hint: None, None
            size: self.texture_size

        BoxLayout:
            id: signup_form
            orientation: 'vertical'
            padding: dp(25), dp(30), dp(25), dp(30)
            spacing: dp(12)
            size_hint: 0.9, 0.75
            pos_hint: {'center_x': 0.5, 'y': 0.04}
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                RoundedRectangle:
                    size: self.size
                    pos: self.pos
                    radius: [dp(20),]

            BoxLayout:
                orientation: 'horizontal'
                size_hint: 1, 0.12
                spacing: dp(10)
                pos_hint: {'center_x': 0.5, 'top': 0.1}
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [dp(20),]

                MDCheckbox:
                    id: ogretmen_checkbox
                    group: 'role_signup'
                    active: True
                    size_hint_x: None
                    width: dp(30)
                    on_active:
                        if self.active: root.selected_role = 'ogretmen'
                Label:
                    text: 'Öğretmen'
                    font_size: '18sp'
                    color: (0,0,0,1)
                    halign: 'left'
                    valign: 'middle'

                MDCheckbox:
                    id: veli_checkbox
                    group: 'role_signup'
                    size_hint_x: None
                    width: dp(30)
                    on_active:
                        if self.active: root.selected_role = 'veli'
                Label:
                    text: 'Veli'
                    font_size: '18sp'
                    color: (0,0,0,1)
                    halign: 'left'
                    valign: 'middle'

            TextInput:
                id: username
                hint_text: 'Kullanıcı Adı'
                size_hint_y: None
                height: dp(50)
                multiline: False
                background_color: 0,0,0,0
                padding: [dp(15), (self.height - self.font_size)/2]
                canvas.after:
                    Color:
                        rgba: 0.8, 0.8, 0.8, 1
                    Line:
                        points: self.x, self.y, self.x + self.width, self.y
                        width: 1.2

            TextInput:
                id: email
                hint_text: 'E-posta'
                size_hint_y: None
                height: dp(50)
                multiline: False
                background_color: 0,0,0,0
                padding: [dp(15), (self.height - self.font_size)/2]
                canvas.after:
                    Color:
                        rgba: 0.8, 0.8, 0.8, 1
                    Line:
                        points: self.x, self.y, self.x + self.width, self.y
                        width: 1.2

            TextInput:
                id: password
                hint_text: 'Şifre'
                password: True
                size_hint_y: None
                height: dp(50)
                multiline: False
                background_color: 0,0,0,0
                padding: [dp(15), (self.height - self.font_size)/2]
                canvas.after:
                    Color:
                        rgba: 0.8, 0.8, 0.8, 1
                    Line:
                        points: self.x, self.y, self.x + self.width, self.y
                        width: 1.2
            TextInput:
                id: password_confirm
                hint_text: 'Şifre Tekrar'
                password: True
                size_hint_y: None
                height: dp(50)
                multiline: False
                background_color: 0,0,0,0
                padding: [dp(15), (self.height - self.font_size)/2]
                canvas.after:
                    Color:
                        rgba: 0.8, 0.8, 0.8, 1
                    Line:
                        points: self.x, self.y, self.x + self.width, self.y
                        width: 1.2

            Widget:
                size_hint_y: 0.2

            Button:
                text: 'Kayıt Ol'
                size_hint_y: None
                height: dp(50)
                background_color: 0,0,0,0
                background_normal: ''
                font_size: '18sp'
                on_release: root.do_signup(username.text, password.text, password_confirm.text, email.text)
                canvas.before:
                    Color:
                        rgba: 3/255, 115/255, 252/255, 1
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [dp(10)]

            Button:
                text: 'Zaten hesabın var mı? Giriş Yap'
                size_hint_y: None
                height: dp(40)
                background_color: 0,0,0,0
                background_normal: ''
                color: 0.5, 0.5, 0.5, 1
                font_size: '14sp'
                on_release: app.root.ids.screen_manager.current = 'login_screen'
