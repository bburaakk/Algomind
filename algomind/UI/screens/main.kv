MDNavigationLayout:
    id: nav_layout
    MDScreenManager:
        id: screen_manager
    MDNavigationDrawer:
        id: nav_drawer
        width: self.parent.width * 0.75
        MDBoxLayout:
            orientation: "vertical"
            padding: dp(15)
            spacing: dp(10)
            MDBoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: dp(120)
                padding: dp(10)
                Image:
                    source: 'algomind/assets/profil_resmi.png'
                    size_hint: None, None
                    size: dp(80), dp(80)
                    pos_hint: {'center_x': .5}
                MDLabel:
                    text: f"Hoş Geldin, {app.logged_in_user}" if app.logged_in_user else "Hoş Geldin, Misafir"
                    font_style: "H6"
                    halign: "center"

            # Birleştirilmiş menü listesi
            MDList:
                id: menu_list
                OneLineIconListItem:
                    text: "Profil"
                    on_release: app.switch_screen('profile_screen')
                    IconLeftWidget:
                        icon: "account-circle"
                OneLineIconListItem:
                    text: "Öğrenci Yönetimi"
                    on_release: app.switch_screen('ogrenciEkleSec')
                    IconLeftWidget:
                        icon: "account-multiple"
                OneLineIconListItem:
                    text: "Rapor Ekranı"
                    on_release: app.switch_screen('rapor_ekrani_screen')
                    IconLeftWidget:
                        icon: "file-chart"
                OneLineIconListItem:
                    text: "Test Seçimi"
                    on_release: app.switch_screen('test_secim')
                    IconLeftWidget:
                        icon: "clipboard-check-outline"
                OneLineIconListItem:
                    text: "Hikaye Üretimi"
                    on_release: app.switch_screen('story_screen')
                    IconLeftWidget:
                        icon: "book"

            # Ortak menü öğeleri (sadece çıkış)
            MDList:
                id: ortak_menu_list
                size_hint_y: None
                height: self.minimum_height
                OneLineIconListItem:
                    text: "Çıkış Yap"
                    on_release: app.logout()
                    IconLeftWidget:
                        icon: "logout"
